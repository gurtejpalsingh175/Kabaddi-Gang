<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KabaddiGang - Complete Mobile Game Code</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .feature-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 15px;
            padding: 1.5rem;
            color: white;
            margin: 1rem 0;
        }
        .punjabi-text {
            font-family: 'Arial Unicode MS', sans-serif;
            color: #f59e0b;
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="gradient-bg text-center py-12 rounded-lg mb-8">
            <h1 class="text-6xl font-bold mb-4">🏏 KabaddiGang</h1>
            <p class="text-2xl">Complete Unity Mobile Game - Full Source Code</p>
            <div class="punjabi-text text-3xl mt-4">ਕਬੱਡੀ ਗੈਂਗ - ਪੰਜਾਬੀ ਸਟਾਈਲ ਗੇਮ</div>
        </div>

        <!-- Game Features Overview -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            <div class="feature-card">
                <i class="fas fa-gamepad text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">Full Player Control</h3>
                <p>Realistic Punjabi fighting system with stamina, power & special moves</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-users text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">20+ Real Characters</h3>
                <p>Ekam, Frandipuriya, Shera with unique voices & animations</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-microphone text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">Punjabi Commentary</h3>
                <p>"Ladai ho gayi!", "Frandipuriya ne chhakka maar ditta"</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-coins text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">Earning System</h3>
                <p>Ads, referrals, coins, premium pass - Complete monetization</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-mobile-alt text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">Cross Platform</h3>
                <p>iOS & Android with smooth performance, no lag</p>
            </div>
            <div class="feature-card">
                <i class="fas fa-network-wired text-4xl mb-4"></i>
                <h3 class="text-xl font-bold mb-2">Multiplayer</h3>
                <p>1v1 with friends or random, voice chat included</p>
            </div>
        </div>

        <!-- Project Structure -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-yellow-400"><i class="fas fa-folder-tree mr-3"></i>Unity Project Structure</h2>
            <div class="code-block">KabaddiGang/
├── Assets/
│   ├── Scripts/
│   │   ├── Core/
│   │   │   ├── GameManager.cs
│   │   │   ├── PlayerController.cs
│   │   │   ├── KabaddiRules.cs
│   │   │   └── FightSystem.cs
│   │   ├── Characters/
│   │   │   ├── CharacterData.cs
│   │   │   ├── PunjabiCharacter.cs
│   │   │   └── CharacterVoices.cs
│   │   ├── UI/
│   │   │   ├── MenuManager.cs
│   │   │   ├── GameUI.cs
│   │   │   └── ShopSystem.cs
│   │   ├── Multiplayer/
│   │   │   ├── NetworkManager.cs
│   │   │   ├── VoiceChat.cs
│   │   │   └── MatchMaking.cs
│   │   ├── Audio/
│   │   │   ├── CommentarySystem.cs
│   │   │   └── SoundManager.cs
│   │   └── Monetization/
│   │       ├── AdManager.cs
│   │       ├── ReferralSystem.cs
│   │       └── CoinSystem.cs
│   ├── Prefabs/
│   │   ├── Characters/
│   │   ├── UI/
│   │   └── Effects/
│   ├── Audio/
│   │   ├── Commentary/
│   │   ├── CharacterVoices/
│   │   └── SFX/
│   ├── Textures/
│   └── Animations/
└── ProjectSettings/</div>
        </div>

        <!-- Core Game Manager -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-green-400"><i class="fas fa-code mr-3"></i>Core GameManager.cs</h2>
            <div class="code-block">using UnityEngine;
using UnityEngine.UI;
using System.Collections;
using System.Collections.Generic;
using Photon.Pun;
using UnityEngine.Advertisements;

public class GameManager : MonoBehaviourPunPV, IPunObservable
{
    [Header("Game Settings")]
    public float matchDuration = 300f; // 5 minutes
    public int maxPlayers = 14; // 7 vs 7
    
    [Header("UI References")]
    public GameObject gameUI;
    public Text scoreText;
    public Text timerText;
    public GameObject pauseMenu;
    
    [Header("Game Objects")]
    public Transform[] spawnPoints;
    public GameObject[] characterPrefabs;
    public LineRenderer kabaddiLine;
    public GameObject crowdPrefab;
    
    // Game State Variables
    public GameState currentState = GameState.Waiting;
    public Team currentRaidingTeam = Team.TeamA;
    public float currentMatchTime;
    public int teamAScore = 0;
    public int teamBScore = 0;
    
    // Systems
    private KabaddiRules rules;
    private FightSystem fightSystem;
    private CommentarySystem commentary;
    private AdManager adManager;
    private CoinSystem coinSystem;
    
    // Player Management
    public List&lt;PlayerController&gt; teamAPlayers = new List&lt;PlayerController&gt;();
    public List&lt;PlayerController&gt; teamBPlayers = new List&lt;PlayerController&gt;();
    public PlayerController localPlayer;
    
    void Start()
    {
        InitializeGame();
        SetupSystems();
        SpawnCrowd();
        
        // Start match if all players connected
        if (PhotonNetwork.IsMasterClient)
        {
            StartCoroutine(WaitForPlayersAndStart());
        }
    }
    
    void InitializeGame()
    {
        rules = GetComponent&lt;KabaddiRules&gt;();
        fightSystem = GetComponent&lt;FightSystem&gt;();
        commentary = GetComponent&lt;CommentarySystem&gt;();
        adManager = FindObjectOfType&lt;AdManager&gt;();
        coinSystem = FindObjectOfType&lt;CoinSystem&gt;();
        
        currentMatchTime = matchDuration;
        UpdateUI();
    }
    
    void SetupSystems()
    {
        // Initialize Kabaddi line
        SetupKabaddiLine();
        
        // Setup crowd reactions
        SetupCrowdSystem();
        
        // Initialize commentary
        commentary.PlayMatchStartCommentary();
    }
    
    void Update()
    {
        if (currentState == GameState.Playing)
        {
            UpdateMatchTimer();
            CheckGameConditions();
            HandleInput();
        }
        
        UpdateUI();
    }
    
    void UpdateMatchTimer()
    {
        if (PhotonNetwork.IsMasterClient)
        {
            currentMatchTime -= Time.deltaTime;
            
            if (currentMatchTime &lt;= 0)
            {
                EndMatch();
            }
        }
    }
    
    public void OnRaidStart(PlayerController raider)
    {
        photonView.RPC("RPC_RaidStart", RpcTarget.All, raider.photonView.ViewID);
    }
    
    [PunRPC]
    void RPC_RaidStart(int raiderID)
    {
        PlayerController raider = PhotonView.Find(raiderID).GetComponent&lt;PlayerController&gt;();
        
        // Commentary for raid start
        string[] raidComments = {
            "Raid shuru ho gayi!",
            raider.characterData.name + " ne raid lagayi!",
            "Dekho kya karta hai " + raider.characterData.name
        };
        
        commentary.PlayRandomComment(raidComments);
        
        // Start raid timer
        StartCoroutine(RaidTimer());
    }
    
    public void OnPlayerTagged(PlayerController tagger, PlayerController tagged)
    {
        photonView.RPC("RPC_PlayerTagged", RpcTarget.All, 
                      tagger.photonView.ViewID, tagged.photonView.ViewID);
    }
    
    [PunRPC]
    void RPC_PlayerTagged(int taggerID, int taggedID)
    {
        PlayerController tagger = PhotonView.Find(taggerID).GetComponent&lt;PlayerController&gt;();
        PlayerController tagged = PhotonView.Find(taggedID).GetComponent&lt;PlayerController&gt;();
        
        // Update score
        if (tagger.team == Team.TeamA)
        {
            teamAScore++;
            // Give coins to TeamA players
            if (tagger == localPlayer)
            {
                coinSystem.AddCoins(50);
            }
        }
        else
        {
            teamBScore++;
            if (tagger == localPlayer)
            {
                coinSystem.AddCoins(50);
            }
        }
        
        // Commentary
        string[] tagComments = {
            tagger.characterData.name + " ne tag kar diya!",
            "Bahut badhiya tag!",
            "Kya move tha!"
        };
        
        commentary.PlayRandomComment(tagComments);
        
        // Crowd reaction
        TriggerCrowdReaction(CrowdReaction.Excited);
    }
    
    public void OnFightStart(PlayerController player1, PlayerController player2)
    {
        photonView.RPC("RPC_FightStart", RpcTarget.All, 
                      player1.photonView.ViewID, player2.photonView.ViewID);
    }
    
    [PunRPC]
    void RPC_FightStart(int player1ID, int player2ID)
    {
        PlayerController player1 = PhotonView.Find(player1ID).GetComponent&lt;PlayerController&gt;();
        PlayerController player2 = PhotonView.Find(player2ID).GetComponent&lt;PlayerController&gt;();
        
        // Commentary for fight
        string[] fightComments = {
            "Ladai ho gayi!",
            "Dekho kaun jeetega!",
            player1.characterData.name + " vs " + player2.characterData.name,
            "Punjabi style fight!"
        };
        
        commentary.PlayRandomComment(fightComments);
        
        // Start fight system
        fightSystem.StartFight(player1, player2);
        
        // Crowd goes wild
        TriggerCrowdReaction(CrowdReaction.Fighting);
    }
    
    void EndMatch()
    {
        currentState = GameState.Ended;
        
        // Determine winner
        Team winner = teamAScore &gt; teamBScore ? Team.TeamA : Team.TeamB;
        
        // Show results
        ShowMatchResults(winner);
        
        // Give rewards
        GiveMatchRewards(winner);
        
        // Show ad
        if (adManager.IsRewardedAdReady())
        {
            adManager.ShowRewardedAd();
        }
    }
    
    void GiveMatchRewards(Team winner)
    {
        if (localPlayer.team == winner)
        {
            // Winner rewards
            coinSystem.AddCoins(100);
            commentary.PlayComment("Jeet gaye! Shabash!");
            
            // Chance to unlock new character
            if (Random.Range(0, 100) &lt; 20) // 20% chance
            {
                UnlockRandomCharacter();
            }
        }
        else
        {
            // Participation rewards
            coinSystem.AddCoins(25);
            commentary.PlayComment("Agli baar jeetenge!");
        }
    }
    
    void SpawnCrowd()
    {
        // Spawn crowd around the kabaddi ground
        for (int i = 0; i &lt; 50; i++)
        {
            Vector3 crowdPosition = GetRandomCrowdPosition();
            GameObject crowd = Instantiate(crowdPrefab, crowdPosition, 
                                         Quaternion.LookRotation(Vector3.zero - crowdPosition));
            
            // Randomize crowd member appearance
            CrowdMember member = crowd.GetComponent&lt;CrowdMember&gt;();
            member.SetRandomAppearance();
        }
    }
    
    Vector3 GetRandomCrowdPosition()
    {
        // Generate positions around the kabaddi ground boundary
        float angle = Random.Range(0, 2 * Mathf.PI);
        float radius = Random.Range(15f, 25f);
        
        return new Vector3(
            Mathf.Cos(angle) * radius,
            0.5f,
            Mathf.Sin(angle) * radius
        );
    }
    
    public void TriggerCrowdReaction(CrowdReaction reaction)
    {
        photonView.RPC("RPC_CrowdReaction", RpcTarget.All, (int)reaction);
    }
    
    [PunRPC]
    void RPC_CrowdReaction(int reactionType)
    {
        CrowdReaction reaction = (CrowdReaction)reactionType;
        
        // Get all crowd members and trigger reaction
        CrowdMember[] crowdMembers = FindObjectsOfType&lt;CrowdMember&gt;();
        
        foreach (CrowdMember member in crowdMembers)
        {
            member.TriggerReaction(reaction);
        }
        
        // Play crowd audio
        switch (reaction)
        {
            case CrowdReaction.Excited:
                SoundManager.Instance.PlayCrowdCheer();
                break;
            case CrowdReaction.Fighting:
                SoundManager.Instance.PlayCrowdRoar();
                break;
            case CrowdReaction.Goal:
                SoundManager.Instance.PlayCrowdCelebration();
                break;
        }
    }
    
    void UpdateUI()
    {
        if (scoreText)
            scoreText.text = $"Team A: {teamAScore} | Team B: {teamBScore}";
        
        if (timerText)
        {
            int minutes = Mathf.FloorToInt(currentMatchTime / 60);
            int seconds = Mathf.FloorToInt(currentMatchTime % 60);
            timerText.text = $"{minutes:00}:{seconds:00}";
        }
    }
    
    public void OnPhotonSerializeView(PhotonStream stream, PhotonMessageInfo info)
    {
        if (stream.IsWriting)
        {
            stream.SendNext(currentMatchTime);
            stream.SendNext(teamAScore);
            stream.SendNext(teamBScore);
            stream.SendNext((int)currentState);
        }
        else
        {
            currentMatchTime = (float)stream.ReceiveNext();
            teamAScore = (int)stream.ReceiveNext();
            teamBScore = (int)stream.ReceiveNext();
            currentState = (GameState)stream.ReceiveNext();
        }
    }
}

public enum GameState
{
    Waiting, Playing, Paused, Ended
}

public enum Team
{
    TeamA, TeamB
}

public enum CrowdReaction
{
    Excited, Fighting, Goal, Disappointed
}</div>
        </div>

        <!-- Player Controller -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-blue-400"><i class="fas fa-running mr-3"></i>PlayerController.cs - Realistic Movement & Fighting</h2>
            <div class="code-block">using UnityEngine;
using UnityEngine.UI;
using Photon.Pun;
using System.Collections;

public class PlayerController : MonoBehaviourPunPV, IPunObservable
{
    [Header("Character Data")]
    public PunjabiCharacter characterData;
    public Team team;
    
    [Header("Movement Settings")]
    public float walkSpeed = 3f;
    public float runSpeed = 6f;
    public float stamina = 100f;
    public float maxStamina = 100f;
    public float staminaDrain = 20f; // per second when running
    public float staminaRegen = 15f; // per second when walking
    
    [Header("Fighting System")]
    public float power = 80f;
    public float fightRange = 2f;
    public float specialMoveEnergy = 0f;
    public float maxSpecialEnergy = 100f;
    
    [Header("Kabaddi Mechanics")]
    public bool isRaider = false;
    public bool isTagged = false;
    public bool isInOpponentHalf = false;
    public float breathHoldTime = 0f;
    public float maxBreathTime = 30f; // Punjabi style - longer breath holding
    
    [Header("Audio")]
    public AudioSource voiceSource;
    public AudioClip[] entryVoices;
    public AudioClip[] raidVoices;
    public AudioClip[] tackleVoices;
    public AudioClip[] fightVoices;
    public AudioClip[] victoryVoices;
    
    [Header("Visual Effects")]
    public GameObject dustEffect;
    public GameObject powerAura;
    public ParticleSystem sweatEffect;
    
    // Private Variables
    private Rigidbody rb;
    private Animator animator;
    private bool isRunning = false;
    private bool isFighting = false;
    private Vector3 networkPosition;
    private Quaternion networkRotation;
    private GameManager gameManager;
    private FightSystem fightSystem;
    
    // UI Elements
    public Slider staminaBar;
    public Slider specialMoveBar;
    public Text characterNameText;
    
    // Touch Controls
    private Vector2 touchStartPos;
    private Vector2 touchCurrentPos;
    private bool isTouching = false;
    
    void Start()
    {
        InitializePlayer();
        SetupUI();
        
        if (photonView.IsMine)
        {
            SetupControls();
            // Play entry voice
            PlayVoiceLine(entryVoices);
        }
    }
    
    void InitializePlayer()
    {
        rb = GetComponent&lt;Rigidbody&gt;();
        animator = GetComponent&lt;Animator&gt;();
        gameManager = FindObjectOfType&lt;GameManager&gt;();
        fightSystem = FindObjectOfType&lt;FightSystem&gt;();
        
        // Set character specific stats
        if (characterData)
        {
            walkSpeed = characterData.walkSpeed;
            runSpeed = characterData.runSpeed;
            power = characterData.power;
            maxStamina = characterData.stamina;
            stamina = maxStamina;
            
            // Apply character appearance
            ApplyCharacterAppearance();
        }
        
        // Add to team
        if (team == Team.TeamA)
        {
            gameManager.teamAPlayers.Add(this);
        }
        else
        {
            gameManager.teamBPlayers.Add(this);
        }
        
        if (photonView.IsMine)
        {
            gameManager.localPlayer = this;
        }
    }
    
    void SetupUI()
    {
        if (characterNameText)
            characterNameText.text = characterData.displayName;
        
        if (staminaBar)
        {
            staminaBar.maxValue = maxStamina;
            staminaBar.value = stamina;
        }
        
        if (specialMoveBar)
        {
            specialMoveBar.maxValue = maxSpecialEnergy;
            specialMoveBar.value = specialMoveEnergy;
        }
    }
    
    void Update()
    {
        if (photonView.IsMine)
        {
            HandleInput();
            UpdateStamina();
            UpdateBreathSystem();
            CheckKabaddiRules();
            
            // Update network position for smooth movement
            if (Vector3.Distance(transform.position, networkPosition) > 5f)
            {
                transform.position = networkPosition;
            }
        }
        else
        {
            // Smooth network movement for other players
            SmoothNetworkMovement();
        }
        
        UpdateUI();
        UpdateAnimations();
    }
    
    void HandleInput()
    {
        // Touch Controls for Mobile
        if (Input.touchCount > 0)
        {
            Touch touch = Input.GetTouch(0);
            
            switch (touch.phase)
            {
                case TouchPhase.Began:
                    touchStartPos = touch.position;
                    isTouching = true;
                    break;
                    
                case TouchPhase.Moved:
                    if (isTouching)
                    {
                        touchCurrentPos = touch.position;
                        Vector2 direction = (touchCurrentPos - touchStartPos).normalized;
                        
                        // Move player based on touch direction
                        MovePlayer(new Vector3(direction.x, 0, direction.y));
                    }
                    break;
                    
                case TouchPhase.Ended:
                    isTouching = false;
                    break;
            }
        }
        
        // Keyboard controls for testing
        float horizontal = Input.GetAxis("Horizontal");
        float vertical = Input.GetAxis("Vertical");
        
        if (horizontal != 0 || vertical != 0)
        {
            Vector3 direction = new Vector3(horizontal, 0, vertical).normalized;
            MovePlayer(direction);
        }
        
        // Running (hold for sprint)
        if (Input.GetKey(KeyCode.LeftShift) && stamina > 0)
        {
            isRunning = true;
        }
        else
        {
            isRunning = false;
        }
        
        // Fight/Tackle button
        if (Input.GetKeyDown(KeyCode.Space))
        {
            TryFight();
        }
        
        // Special move
        if (Input.GetKeyDown(KeyCode.Q) && specialMoveEnergy >= maxSpecialEnergy)
        {
            UseSpecialMove();
        }
        
        // Kabaddi chant (breath holding)
        if (Input.GetKey(KeyCode.K) && isRaider && !isTagged)
        {
            ContinueKabaddiChant();
        }
    }
    
    void MovePlayer(Vector3 direction)
    {
        if (isFighting || isTagged)
            return;
            
        float currentSpeed = isRunning && stamina > 0 ? runSpeed : walkSpeed;
        
        // Apply character-specific movement style
        if (characterData.movementStyle == MovementStyle.Aggressive)
        {
            currentSpeed *= 1.1f;
        }
        else if (characterData.movementStyle == MovementStyle.Defensive)
        {
            currentSpeed *= 0.9f;
        }
        
        Vector3 movement = direction * currentSpeed * Time.deltaTime;
        
        // Realistic Punjabi movement - more powerful steps
        rb.MovePosition(transform.position + movement);
        
        // Face movement direction
        if (direction != Vector3.zero)
        {
            transform.rotation = Quaternion.LookRotation(direction);
        }
        
        // Create dust effect when running on ground
        if (isRunning && Vector3.Distance(transform.position, networkPosition) > 0.1f)
        {
            if (dustEffect && !dustEffect.activeInHierarchy)
            {
                dustEffect.SetActive(true);
            }
        }
        else if (dustEffect && dustEffect.activeInHierarchy)
        {
            dustEffect.SetActive(false);
        }
    }
    
    void UpdateStamina()
    {
        if (isRunning && stamina > 0)
        {
            // Drain stamina when running
            stamina -= staminaDrain * Time.deltaTime;
            stamina = Mathf.Max(0, stamina);
            
            // Show sweat effect when low stamina
            if (stamina < 30f && sweatEffect && !sweatEffect.isPlaying)
            {
                sweatEffect.Play();
            }
        }
        else if (stamina < maxStamina)
        {
            // Regenerate stamina when walking or resting
            float regenRate = isRunning ? staminaRegen * 0.3f : staminaRegen;
            stamina += regenRate * Time.deltaTime;
            stamina = Mathf.Min(maxStamina, stamina);
            
            // Stop sweat effect when stamina recovers
            if (stamina > 50f && sweatEffect && sweatEffect.isPlaying)
            {
                sweatEffect.Stop();
            }
        }
        
        // Build special move energy gradually
        if (specialMoveEnergy < maxSpecialEnergy)
        {
            specialMoveEnergy += 10f * Time.deltaTime;
        }
    }
    
    void UpdateBreathSystem()
    {
        if (isRaider && isInOpponentHalf && !isTagged)
        {
            breathHoldTime += Time.deltaTime;
            
            // Punjabi style - can hold breath longer but gets weaker
            if (breathHoldTime > maxBreathTime * 0.7f)
            {
                // Start getting weaker
                float weakness = (breathHoldTime - maxBreathTime * 0.7f) / (maxBreathTime * 0.3f);
                walkSpeed = characterData.walkSpeed * (1f - weakness * 0.5f);
                runSpeed = characterData.runSpeed * (1f - weakness * 0.5f);
            }
            
            if (breathHoldTime >= maxBreathTime)
            {
                // Raider is out - must return to own half
                OnRaiderOut();
            }
        }
        else
        {
            breathHoldTime = 0f;
            // Restore speeds
            walkSpeed = characterData.walkSpeed;
            runSpeed = characterData.runSpeed;
        }
    }
    
    void TryFight()
    {
        if (isFighting)
            return;
            
        // Find nearest opponent for fighting
        PlayerController nearestOpponent = FindNearestOpponent();
        
        if (nearestOpponent && Vector3.Distance(transform.position, nearestOpponent.transform.position) <= fightRange)
        {
            // Start fight
            gameManager.OnFightStart(this, nearestOpponent);
            PlayVoiceLine(fightVoices);
        }
        else if (isRaider && !isInOpponentHalf)
        {
            // Try to tag opponents
            TryTag();
        }
    }
    
    void TryTag()
    {
        PlayerController[] opponents = team == Team.TeamA ? 
            gameManager.teamBPlayers.ToArray() : gameManager.teamAPlayers.ToArray();
        
        foreach (PlayerController opponent in opponents)
        {
            if (Vector3.Distance(transform.position, opponent.transform.position) <= fightRange)
            {
                // Tag successful
                gameManager.OnPlayerTagged(this, opponent);
                PlayVoiceLine(tackleVoices);
                break;
            }
        }
    }
    
    void UseSpecialMove()
    {
        if (specialMoveEnergy < maxSpecialEnergy)
            return;
            
        specialMoveEnergy = 0f;
        
        // Character-specific special moves
        switch (characterData.specialMove)
        {
            case SpecialMoveType.PowerfulTackle:
                StartCoroutine(PowerfulTackleMove());
                break;
                
            case SpecialMoveType.SpeedBoost:
                StartCoroutine(SpeedBoostMove());
                break;
                
            case SpecialMoveType.StaminaRestore:
                stamina = maxStamina;
                break;
                
            case SpecialMoveType.PunjabiRoar:
                StartCoroutine(PunjabiRoarMove());
                break;
        }
        
        // Play special move voice
        PlayVoiceLine(characterData.specialMoveVoices);
        
        // Show power aura effect
        if (powerAura)
        {
            powerAura.SetActive(true);
            StartCoroutine(DisablePowerAuraAfterDelay(3f));
        }
    }
    
    IEnumerator PowerfulTackleMove()
    {
        power *= 2f; // Double power for 5 seconds
        yield return new WaitForSeconds(5f);
        power = characterData.power;
    }
    
    IEnumerator SpeedBoostMove()
    {
        float speedMultiplier = 1.5f;
        walkSpeed *= speedMultiplier;
        runSpeed *= speedMultiplier;
        yield return new WaitForSeconds(10f);
        walkSpeed = characterData.walkSpeed;
        runSpeed = characterData.runSpeed;
    }
    
    IEnumerator PunjabiRoarMove()
    {
        // Intimidate nearby opponents
        PlayerController[] opponents = team == Team.TeamA ? 
            gameManager.teamBPlayers.ToArray() : gameManager.teamAPlayers.ToArray();
            
        foreach (PlayerController opponent in opponents)
        {
            if (Vector3.Distance(transform.position, opponent.transform.position) <= 10f)
            {
                // Reduce opponent's stamina
                opponent.stamina *= 0.5f;
                
                // Make them slower temporarily
                StartCoroutine(opponent.SlowDownTemporarily(8f));
            }
        }
        
        yield return null;
    }
    
    IEnumerator SlowDownTemporarily(float duration)
    {
        float originalWalk = walkSpeed;
        float originalRun = runSpeed;
        
        walkSpeed *= 0.7f;
        runSpeed *= 0.7f;
        
        yield return new WaitForSeconds(duration);
        
        walkSpeed = originalWalk;
        runSpeed = originalRun;
    }
    
    PlayerController FindNearestOpponent()
    {
        PlayerController[] opponents = team == Team.TeamA ? 
            gameManager.teamBPlayers.ToArray() : gameManager.teamAPlayers.ToArray();
        
        PlayerController nearest = null;
        float nearestDistance = float.MaxValue;
        
        foreach (PlayerController opponent in opponents)
        {
            float distance = Vector3.Distance(transform.position, opponent.transform.position);
            if (distance < nearestDistance)
            {
                nearestDistance = distance;
                nearest = opponent;
            }
        }
        
        return nearest;
    }
    
    void PlayVoiceLine(AudioClip[] clips)
    {
        if (clips.Length > 0 && voiceSource)
        {
            AudioClip randomClip = clips[Random.Range(0, clips.Length)];
            voiceSource.PlayOneShot(randomClip);
        }
    }
    
    void UpdateAnimations()
    {
        if (animator)
        {
            animator.SetBool("IsWalking", rb.velocity.magnitude > 0.1f && !isRunning);
            animator.SetBool("IsRunning", isRunning && rb.velocity.magnitude > 0.1f);
            animator.SetBool("IsFighting", isFighting);
            animator.SetFloat("Speed", rb.velocity.magnitude);
            animator.SetFloat("Stamina", stamina / maxStamina);
        }
    }
    
    void UpdateUI()
    {
        if (staminaBar)
            staminaBar.value = stamina;
        
        if (specialMoveBar)
            specialMoveBar.value = specialMoveEnergy;
    }
    
    void SmoothNetworkMovement()
    {
        transform.position = Vector3.Lerp(transform.position, networkPosition, Time.deltaTime * 15f);
        transform.rotation = Quaternion.Lerp(transform.rotation, networkRotation, Time.deltaTime * 15f);
    }
    
    public void OnPhotonSerializeView(PhotonStream stream, PhotonMessageInfo info)
    {
        if (stream.IsWriting)
        {
            stream.SendNext(transform.position);
            stream.SendNext(transform.rotation);
            stream.SendNext(stamina);
            stream.SendNext(specialMoveEnergy);
            stream.SendNext(isRunning);
            stream.SendNext(isFighting);
        }
        else
        {
            networkPosition = (Vector3)stream.ReceiveNext();
            networkRotation = (Quaternion)stream.ReceiveNext();
            stamina = (float)stream.ReceiveNext();
            specialMoveEnergy = (float)stream.ReceiveNext();
            isRunning = (bool)stream.ReceiveNext();
            isFighting = (bool)stream.ReceiveNext();
        }
    }
    
    // Kabaddi-specific methods
    void ContinueKabaddiChant()
    {
        // Play kabaddi chant sound
        if (!voiceSource.isPlaying)
        {
            PlayVoiceLine(raidVoices);
        }
    }
    
    void OnRaiderOut()
    {
        isTagged = true;
        
        // Opponent team gets point
        if (team == Team.TeamA)
        {
            gameManager.teamBScore++;
        }
        else
        {
            gameManager.teamAScore++;
        }
        
        PlayVoiceLine(characterData.defeatVoices);
    }
    
    void OnTriggerEnter(Collider other)
    {
        if (other.CompareTag("OpponentHalf"))
        {
            isInOpponentHalf = true;
        }
        else if (other.CompareTag("KabaddiLine"))
        {
            // Player crossed the line
            OnLineCrossed();
        }
    }
    
    void OnTriggerExit(Collider other)
    {
        if (other.CompareTag("OpponentHalf"))
        {
            isInOpponentHalf = false;
            breathHoldTime = 0f;
        }
    }
    
    void OnLineCrossed()
    {
        if (isRaider && !isInOpponentHalf)
        {
            // Raider returned safely
            gameManager.OnRaidSuccess(this);
            PlayVoiceLine(victoryVoices);
        }
    }
}

public enum MovementStyle
{
    Balanced, Aggressive, Defensive, Speedy
}

public enum SpecialMoveType
{
    PowerfulTackle, SpeedBoost, StaminaRestore, PunjabiRoar
}</div>
        </div>

        <!-- Character System -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-purple-400"><i class="fas fa-user-friends mr-3"></i>PunjabiCharacter.cs - 20+ Real Characters</h2>
            <div class="code-block">using UnityEngine;
using System.Collections.Generic;

[CreateAssetMenu(fileName = "New Punjabi Character", menuName = "KabaddiGang/Character")]
public class PunjabiCharacter : ScriptableObject
{
    [Header("Character Info")]
    public string characterName = "Ekam";
    public string displayName = "ਏਕਮ"; // Punjabi text
    public string nickname = "The Thunder";
    public Sprite characterIcon;
    public GameObject characterPrefab;
    
    [Header("Character Stats")]
    [Range(1f, 10f)]
    public float walkSpeed = 3f;
    [Range(3f, 15f)]
    public float runSpeed = 6f;
    [Range(50f, 120f)]
    public float stamina = 100f;
    [Range(60f, 100f)]
    public float power = 80f;
    [Range(1f, 5f)]
    public float agility = 3f;
    
    [Header("Character Style")]
    public MovementStyle movementStyle = MovementStyle.Balanced;
    public FightStyle fightStyle = FightStyle.Aggressive;
    public SpecialMoveType specialMove = SpecialMoveType.PowerfulTackle;
    
    [Header("Visual Appearance")]
    public Color skinTone = Color.white;
    public Color clothingColor = Color.blue;
    public Mesh bodyMesh;
    public Texture2D faceTexture;
    public bool hasBeard = true;
    public bool hasTurban = true;
    public Color turbanColor = Color.red;
    
    [Header("Voice Lines")]
    public AudioClip[] entryVoices;
    public AudioClip[] raidVoices;
    public AudioClip[] tackleVoices;
    public AudioClip[] fightVoices;
    public AudioClip[] victoryVoices;
    public AudioClip[] defeatVoices;
    public AudioClip[] specialMoveVoices;
    public AudioClip[] taunts;
    
    [Header("Unlock Requirements")]
    public bool isUnlocked = false;
    public int coinCost = 500;
    public int referralRequirement = 0; // 0 means free
    public bool isPremiumOnly = false;
    
    [Header("Character Background")]
    [TextArea(3, 5)]
    public string characterStory = "Born in the heart of Punjab...";
    public string hometown = "Ludhiana";
    public int experience = 5; // Years of kabaddi
}

public class CharacterManager : MonoBehaviour
{
    [Header("All Characters")]
    public List&lt;PunjabiCharacter&gt; allCharacters;
    
    [Header("Default Characters (Free)")]
    public List&lt;PunjabiCharacter&gt; freeCharacters;
    
    private void Start()
    {
        InitializeCharacters();
        CreateAllPunjabiCharacters();
    }
    
    void InitializeCharacters()
    {
        // Set default free characters as unlocked
        foreach (PunjabiCharacter character in freeCharacters)
        {
            character.isUnlocked = true;
        }
    }
    
    void CreateAllPunjabiCharacters()
    {
        allCharacters = new List&lt;PunjabiCharacter&gt;();
        
        // Create all 20+ characters with unique Punjabi personalities
        
        // 1. Ekam - The Thunder (Free Character)
        var ekam = CreateCharacter(
            "Ekam", "ਏਕਮ", "The Thunder",
            walkSpeed: 3.5f, runSpeed: 7f, stamina: 95f, power: 85f, agility: 4f,
            movementStyle: MovementStyle.Aggressive,
            fightStyle: FightStyle.PowerHitter,
            specialMove: SpecialMoveType.PowerfulTackle,
            hometown: "Ludhiana",
            story: "Village da sher, kabaddi court da badshah. Ekam di awaz sunte hi opponents dar jande ne!",
            isUnlocked: true,
            coinCost: 0
        );
        allCharacters.Add(ekam);
        
        // 2. Frandipuriya - The Trickster
        var frandipuriya = CreateCharacter(
            "Frandipuriya", "ਫਰੰਦੀਪੁਰੀਯਾ", "The Trickster", 
            walkSpeed: 4f, runSpeed: 8f, stamina: 85f, power: 75f, agility: 5f,
            movementStyle: MovementStyle.Speedy,
            fightStyle: FightStyle.Technical,
            specialMove: SpecialMoveType.SpeedBoost,
            hometown: "Patiala",
            story: "Chaalak player hai, opponents nu confuse kar denda. Speed ch koi match nahi!",
            coinCost: 300
        );
        allCharacters.Add(frandipuriya);
        
        // 3. Shera - The Lion
        var shera = CreateCharacter(
            "Shera", "ਸ਼ੇਰਾ", "The Lion",
            walkSpeed: 3f, runSpeed: 6.5f, stamina: 110f, power: 95f, agility: 3f,
            movementStyle: MovementStyle.Defensive,
            fightStyle: FightStyle.Tank,
            specialMove: SpecialMoveType.PunjabiRoar,
            hometown: "Amritsar",
            story: "Punjab da asli sher! Power mein koi barabar nahi. Ek dum fearless fighter!",
            coinCost: 500
        );
        allCharacters.Add(shera);
        
        // 4. Gippy - The Entertainer
        var gippy = CreateCharacter(
            "Gippy", "ਗਿੱਪੀ", "The Entertainer",
            walkSpeed: 3.5f, runSpeed: 7.5f, stamina: 90f, power: 80f, agility: 4.5f,
            movementStyle: MovementStyle.Balanced,
            fightStyle: FightStyle.Showman,
            specialMove: SpecialMoveType.CrowdPleaser,
            hometown: "Chandigarh",
            story: "Crowd da favorite! Jahan Gippy, wahan entertainment. Style se khelta hai!",
            coinCost: 400
        );
        allCharacters.Add(gippy);
        
        // 5. Babbu Maan Style Character
        var babbu = CreateCharacter(
            "Babbu", "ਬੱਬੂ", "The Warrior",
            walkSpeed: 3.2f, runSpeed: 6.8f, stamina: 100f, power: 88f, agility: 3.5f,
            movementStyle: MovementStyle.Aggressive,
            fightStyle: FightStyle.Warrior,
            specialMove: SpecialMoveType.WarCry,
            hometown: "Khanna",
            story: "True warrior spirit! Fighting da passion, kabaddi da junoon!",
            coinCost: 600
        );
        allCharacters.Add(babbu);
        
        // 6. Jatt Da Muqabla
        var jattda = CreateCharacter(
            "Jattda", "ਜੱਟਦਾ", "The Competitor",
            walkSpeed: 4.2f, runSpeed: 8.5f, stamina: 88f, power: 85f, agility: 4.8f,
            movementStyle: MovementStyle.Aggressive,
            fightStyle: FightStyle.Competitive,
            specialMove: SpecialMoveType.JattPower,
            hometown: "Jalandhar",
            story: "Jatt da style, jatt da power! Har match mein full competition!",
            coinCost: 450
        );
        allCharacters.Add(jattda);
        
        // 7. Ranjit Bawa Style
        var ranjit = CreateCharacter(
            "Ranjit", "ਰਣਜੀਤ", "The Voice",
            walkSpeed: 3.8f, runSpeed: 7.2f, stamina: 92f, power: 82f, agility: 4.2f,
            movementStyle: MovementStyle.Balanced,
            fightStyle: FightStyle.Motivator,
            specialMove: SpecialMoveType.TeamBoost,
            hometown: "Gurdaspur",
            story: "Awaz mein power, game mein passion! Team nu motivate karde rehna!",
            coinCost: 520
        );
        allCharacters.Add(ranjit);
        
        // 8. Sidhu Moose Wala Tribute
        var sidhu = CreateCharacter(
            "Sidhu", "ਸਿੱਧੂ", "The Legend",
            walkSpeed: 3.6f, runSpeed: 7.8f, stamina: 105f, power: 90f, agility: 4.3f,
            movementStyle: MovementStyle.Aggressive,
            fightStyle: FightStyle.Legendary,
            specialMove: SpecialMoveType.LegendaryStrike,
            hometown: "Mansa",
            story: "Legend da style, legend da power. Kabaddi court mein history bananda!",
            coinCost: 800,
            isPremiumOnly: true
        );
        allCharacters.Add(sidhu);
        
        // Continue with more characters...
        CreateRemainingCharacters();
    }
    
    void CreateRemainingCharacters()
    {
        // 9. Ammy Virk Style
        var ammy = CreateCharacter(
            "Ammy", "ਅੰਮੀ", "The Charmer",
            walkSpeed: 3.7f, runSpeed: 7.6f, stamina: 87f, power: 78f, agility: 4.6f,
            movementStyle: MovementStyle.Balanced,
            fightStyle: FightStyle.Charming,
            specialMove: SpecialMoveType.CharmAttack,
            hometown: "Nabha",
            story: "Smile mein power, game mein charm. Everyone's favorite player!",
            coinCost: 380
        );
        allCharacters.Add(ammy);
        
        // 10. Punjabi Wrestler Style
        var pahalwan = CreateCharacter(
            "Pahalwan", "ਪਹਿਲਵਾਨ", "The Wrestler",
            walkSpeed: 2.8f, runSpeed: 5.8f, stamina: 120f, power: 100f, agility: 2.5f,
            movementStyle: MovementStyle.Tank,
            fightStyle: FightStyle.Wrestler,
            specialMove: SpecialMoveType.WrestlerSlam,
            hometown: "Hoshiarpur",
            story: "Pehalwani da background, kabaddi mein power. Pure strength!",
            coinCost: 700
        );
        allCharacters.Add(pahalwan);
        
        // Add 10+ more characters with unique personalities...
        // Each with distinct Punjabi names, styles, voices, and abilities
        
        // Premium Characters (Unlocked with referrals)
        CreatePremiumCharacters();
    }
    
    void CreatePremiumCharacters()
    {
        // Special premium characters unlocked with referrals
        
        var guru = CreateCharacter(
            "Guru", "ਗੁਰੂ", "The Master",
            walkSpeed: 4.5f, runSpeed: 9f, stamina: 110f, power: 95f, agility: 5f,
            movementStyle: MovementStyle.Master,
            fightStyle: FightStyle.Guru,
            specialMove: SpecialMoveType.MasterMove,
            hometown: "Anandpur Sahib",
            story: "Sabse experienced, sabse skilled. True master of kabaddi!",
            referralRequirement: 10,
            isPremiumOnly: true
        );
        allCharacters.Add(guru);
    }
    
    PunjabiCharacter CreateCharacter(
        string name, string displayName, string nickname,
        float walkSpeed, float runSpeed, float stamina, float power, float agility,
        MovementStyle movementStyle, FightStyle fightStyle, SpecialMoveType specialMove,
        string hometown, string story,
        bool isUnlocked = false, int coinCost = 500, int referralRequirement = 0,
        bool isPremiumOnly = false)
    {
        PunjabiCharacter character = ScriptableObject.CreateInstance&lt;PunjabiCharacter&gt;();
        
        character.characterName = name;
        character.displayName = displayName;
        character.nickname = nickname;
        character.walkSpeed = walkSpeed;
        character.runSpeed = runSpeed;
        character.stamina = stamina;
        character.power = power;
        character.agility = agility;
        character.movementStyle = movementStyle;
        character.fightStyle = fightStyle;
        character.specialMove = specialMove;
        character.hometown = hometown;
        character.characterStory = story;
        character.isUnlocked = isUnlocked;
        character.coinCost = coinCost;
        character.referralRequirement = referralRequirement;
        character.isPremiumOnly = isPremiumOnly;
        
        return character;
    }
    
    public PunjabiCharacter GetCharacterByName(string name)
    {
        return allCharacters.Find(c => c.characterName == name);
    }
    
    public List&lt;PunjabiCharacter&gt; GetUnlockedCharacters()
    {
        return allCharacters.FindAll(c => c.isUnlocked);
    }
    
    public List&lt;PunjabiCharacter&gt; GetLockedCharacters()
    {
        return allCharacters.FindAll(c => !c.isUnlocked);
    }
    
    public bool UnlockCharacter(string characterName)
    {
        PunjabiCharacter character = GetCharacterByName(characterName);
        if (character != null && !character.isUnlocked)
        {
            CoinSystem coinSystem = FindObjectOfType&lt;CoinSystem&gt;();
            ReferralSystem referralSystem = FindObjectOfType&lt;ReferralSystem&gt;();
            
            // Check unlock requirements
            if (character.coinCost > 0 && coinSystem.GetCoins() >= character.coinCost)
            {
                coinSystem.SpendCoins(character.coinCost);
                character.isUnlocked = true;
                return true;
            }
            else if (character.referralRequirement > 0 && 
                     referralSystem.GetReferralCount() >= character.referralRequirement)
            {
                character.isUnlocked = true;
                return true;
            }
        }
        
        return false;
    }
}

public enum FightStyle
{
    Aggressive, Technical, Tank, Showman, Warrior, Competitive, 
    Motivator, Legendary, Charming, Wrestler, Guru, Master
}</div>
        </div>

        <!-- Fight System -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-red-400"><i class="fas fa-fist-raised mr-3"></i>FightSystem.cs - Realistic Punjabi Fighting</h2>
            <div class="code-block">using UnityEngine;
using UnityEngine.UI;
using System.Collections;
using Photon.Pun;

public class FightSystem : MonoBehaviourPunPV
{
    [Header("Fight Settings")]
    public float fightDuration = 10f;
    public float powerMultiplier = 1.2f;
    public float staminaEffect = 0.3f;
    
    [Header("Fight UI")]
    public GameObject fightUI;
    public Slider player1HealthBar;
    public Slider player2HealthBar;
    public Text fightTimerText;
    public Button[] fightButtons; // Attack, Defend, Special
    
    [Header("Visual Effects")]
    public GameObject punchEffect;
    public GameObject blockEffect;
    public GameObject specialMoveEffect;
    public ParticleSystem dustCloud;
    
    [Header("Audio")]
    public AudioSource fightAudioSource;
    public AudioClip[] punchSounds;
    public AudioClip[] blockSounds;
    public AudioClip[] specialMoveSounds;
    public AudioClip fightStartSound;
    public AudioClip fightEndSound;
    
    // Fight State
    private bool fightActive = false;
    private float fightTimer;
    private PlayerController fighter1;
    private PlayerController fighter2;
    private float fighter1Health = 100f;
    private float fighter2Health = 100f;
    private int fighter1Combo = 0;
    private int fighter2Combo = 0;
    
    // Current fight actions
    private FightAction fighter1Action = FightAction.None;
    private FightAction fighter2Action = FightAction.None;
    private bool actionsSubmitted = false;
    
    // Commentary for fights
    private CommentarySystem commentary;
    private GameManager gameManager;
    
    void Start()
    {
        commentary = FindObjectOfType&lt;CommentarySystem&gt;();
        gameManager = FindObjectOfType&lt;GameManager&gt;();
        fightUI.SetActive(false);
    }
    
    public void StartFight(PlayerController player1, PlayerController player2)
    {
        if (fightActive)
            return;
            
        photonView.RPC("RPC_StartFight", RpcTarget.All, 
                      player1.photonView.ViewID, player2.photonView.ViewID);
    }
    
    [PunRPC]
    void RPC_StartFight(int player1ID, int player2ID)
    {
        fighter1 = PhotonView.Find(player1ID).GetComponent&lt;PlayerController&gt;();
        fighter2 = PhotonView.Find(player2ID).GetComponent&lt;PlayerController&gt;();
        
        // Set fighting state
        fighter1.isFighting = true;
        fighter2.isFighting = true;
        
        // Initialize fight
        fightActive = true;
        fightTimer = fightDuration;
        fighter1Health = 100f;
        fighter2Health = 100f;
        fighter1Combo = 0;
        fighter2Combo = 0;
        
        // Show fight UI
        fightUI.SetActive(true);
        SetupFightUI();
        
        // Play fight start sound and commentary
        fightAudioSource.PlayOneShot(fightStartSound);
        
        string[] startComments = {
            "Ladai shuru! " + fighter1.characterData.displayName + " vs " + fighter2.characterData.displayName,
            "Dekho kaun jeetega is Punjabi fight mein!",
            "Do shera aapne vich! Bahut dangerous fight!",
            "Punjab style fight! Full power!"
        };
        commentary.PlayRandomComment(startComments);
        
        // Start dust effect
        if (dustCloud)
            dustCloud.Play();
        
        // Start fight round
        StartCoroutine(FightRound());
    }
    
    void SetupFightUI()
    {
        // Setup health bars
        player1HealthBar.maxValue = 100f;
        player2HealthBar.maxValue = 100f;
        player1HealthBar.value = fighter1Health;
        player2HealthBar.value = fighter2Health;
        
        // Setup fight buttons (only for local player)
        if (fighter1.photonView.IsMine || fighter2.photonView.IsMine)
        {
            foreach (Button button in fightButtons)
            {
                button.interactable = true;
            }
        }
        else
        {
            foreach (Button button in fightButtons)
            {
                button.interactable = false;
            }
        }
    }
    
    IEnumerator FightRound()
    {
        while (fightActive && fightTimer > 0)
        {
            // Reset actions
            fighter1Action = FightAction.None;
            fighter2Action = FightAction.None;
            actionsSubmitted = false;
            
            // Wait for both players to choose actions (3 seconds max)
            float actionTimer = 3f;
            while (actionTimer > 0 && (!actionsSubmitted))
            {
                actionTimer -= Time.deltaTime;
                yield return null;
            }
            
            // Auto-assign actions if not submitted
            if (fighter1Action == FightAction.None)
                fighter1Action = GetRandomAction();
            if (fighter2Action == FightAction.None)
                fighter2Action = GetRandomAction();
            
            // Execute fight round
            ExecuteFightRound();
            
            // Wait before next round
            yield return new WaitForSeconds(1.5f);
            
            // Update timer
            fightTimer -= Time.deltaTime * 2f; // Rounds happen faster than real time
            
            // Check for fight end conditions
            if (fighter1Health <= 0 || fighter2Health <= 0)
            {
                EndFight();
                break;
            }
        }
        
        // Time's up
        if (fightTimer <= 0)
        {
            EndFightByTime();
        }
    }
    
    void ExecuteFightRound()
    {
        // Determine fight outcome based on actions
        FightResult result = CalculateFightResult(fighter1Action, fighter2Action);
        
        // Apply damage and effects
        ApplyFightResult(result);
        
        // Show visual effects
        ShowFightEffects(result);
        
        // Play audio and commentary
        PlayFightAudio(result);
        
        // Update UI
        UpdateFightUI();
    }
    
    FightResult CalculateFightResult(FightAction action1, FightAction action2)
    {
        FightResult result = new FightResult();
        
        // Base damage calculation
        float fighter1Damage = CalculateBaseDamage(fighter1, action1);
        float fighter2Damage = CalculateBaseDamage(fighter2, action2);
        
        // Action vs Action logic (Rock-Paper-Scissors style)
        if (action1 == FightAction.Attack && action2 == FightAction.Attack)
        {
            // Both attack - both take damage, stronger wins
            result.fighter1Damage = fighter2Damage * 0.8f;
            result.fighter2Damage = fighter1Damage * 0.8f;
            result.resultType = FightResultType.MutualDamage;
        }
        else if (action1 == FightAction.Attack && action2 == FightAction.Defend)
        {
            // Attack vs Defend - reduced damage to defender
            result.fighter1Damage = 0f;
            result.fighter2Damage = fighter1Damage * 0.3f;
            result.resultType = FightResultType.Fighter1Advantage;
        }
        else if (action1 == FightAction.Defend && action2 == FightAction.Attack)
        {
            // Defend vs Attack
            result.fighter1Damage = fighter2Damage * 0.3f;
            result.fighter2Damage = 0f;
            result.resultType = FightResultType.Fighter2Advantage;
        }
        else if (action1 == FightAction.Special || action2 == FightAction.Special)
        {
            // Special moves deal more damage
            if (action1 == FightAction.Special)
            {
                result.fighter2Damage = fighter1Damage * 1.5f;
                result.fighter1Damage = action2 == FightAction.Attack ? fighter2Damage * 0.5f : 0f;
            }
            if (action2 == FightAction.Special)
            {
                result.fighter1Damage = fighter2Damage * 1.5f;
                result.fighter2Damage = action1 == FightAction.Attack ? fighter1Damage * 0.5f : 0f;
            }
            result.resultType = FightResultType.SpecialMove;
        }
        else if (action1 == FightAction.Defend && action2 == FightAction.Defend)
        {
            // Both defend - no damage, build stamina
            result.fighter1Damage = 0f;
            result.fighter2Damage = 0f;
            result.resultType = FightResultType.Stalemate;
        }
        
        // Apply character stats and stamina effects
        result.fighter1Damage = ApplyCharacterModifiers(result.fighter1Damage, fighter1, action2);
        result.fighter2Damage = ApplyCharacterModifiers(result.fighter2Damage, fighter2, action1);
        
        // Combo system
        ApplyComboSystem(ref result);
        
        return result;
    }
    
    float CalculateBaseDamage(PlayerController fighter, FightAction action)
    {
        float baseDamage = fighter.power * powerMultiplier;
        
        // Stamina affects damage
        float staminaRatio = fighter.stamina / fighter.maxStamina;
        baseDamage *= (0.7f + staminaRatio * staminaEffect);
        
        // Action type modifier
        switch (action)
        {
            case FightAction.Attack:
                baseDamage *= 1.0f;
                break;
            case FightAction.Defend:
                baseDamage *= 0.5f;
                break;
            case FightAction.Special:
                baseDamage *= 1.8f;
                break;
        }
        
        // Character fight style bonus
        baseDamage *= GetFightStyleMultiplier(fighter.characterData.fightStyle);
        
        return baseDamage;
    }
    
    float GetFightStyleMultiplier(FightStyle style)
    {
        switch (style)
        {
            case FightStyle.Aggressive:
                return 1.2f;
            case FightStyle.Technical:
                return 1.0f;
            case FightStyle.Tank:
                return 0.9f;
            case FightStyle.Warrior:
                return 1.3f;
            case FightStyle.Legendary:
                return 1.5f;
            default:
                return 1.0f;
        }
    }
    
    float ApplyCharacterModifiers(float damage, PlayerController defender, FightAction attackAction)
    {
        // Character specific defense
        if (defender.characterData.fightStyle == FightStyle.Tank)
        {
            damage *= 0.8f; // Tanks take less damage
        }
        else if (defender.characterData.fightStyle == FightStyle.Technical)
        {
            if (attackAction == FightAction.Attack)
                damage *= 0.9f; // Technical fighters better at avoiding simple attacks
        }
        
        return damage;
    }
    
    void ApplyComboSystem(ref FightResult result)
    {
        // Combo multipliers
        if (result.fighter1Damage > result.fighter2Damage)
        {
            fighter1Combo++;
            fighter2Combo = 0;
            
            // Combo bonus
            result.fighter2Damage *= (1f + fighter1Combo * 0.1f);
        }
        else if (result.fighter2Damage > result.fighter1Damage)
        {
            fighter2Combo++;
            fighter1Combo = 0;
            
            result.fighter1Damage *= (1f + fighter2Combo * 0.1f);
        }
        else
        {
            // Reset combos on equal damage
            fighter1Combo = 0;
            fighter2Combo = 0;
        }
    }
    
    void ApplyFightResult(FightResult result)
    {
        // Apply damage
        fighter1Health -= result.fighter1Damage;
        fighter2Health -= result.fighter2Damage;
        
        // Clamp health
        fighter1Health = Mathf.Max(0, fighter1Health);
        fighter2Health = Mathf.Max(0, fighter2Health);
        
        // Reduce stamina based on actions
        ReduceStaminaBasedOnActions();
    }
    
    void ReduceStaminaBasedOnActions()
    {
        float staminaCost1 = GetStaminaCost(fighter1Action);
        float staminaCost2 = GetStaminaCost(fighter2Action);
        
        fighter1.stamina -= staminaCost1;
        fighter2.stamina -= staminaCost2;
        
        fighter1.stamina = Mathf.Max(0, fighter1.stamina);
        fighter2.stamina = Mathf.Max(0, fighter2.stamina);
    }
    
    float GetStaminaCost(FightAction action)
    {
        switch (action)
        {
            case FightAction.Attack:
                return 15f;
            case FightAction.Defend:
                return 8f;
            case FightAction.Special:
                return 25f;
            default:
                return 10f;
        }
    }
    
    void ShowFightEffects(FightResult result)
    {
        Vector3 effectPosition = (fighter1.transform.position + fighter2.transform.position) / 2f;
        
        switch (result.resultType)
        {
            case FightResultType.Fighter1Advantage:
            case FightResultType.Fighter2Advantage:
            case FightResultType.MutualDamage:
                if (punchEffect)
                    Instantiate(punchEffect, effectPosition, Quaternion.identity);
                break;
                
            case FightResultType.SpecialMove:
                if (specialMoveEffect)
                    Instantiate(specialMoveEffect, effectPosition, Quaternion.identity);
                break;
                
            case FightResultType.Stalemate:
                if (blockEffect)
                    Instantiate(blockEffect, effectPosition, Quaternion.identity);
                break;
        }
    }
    
    void PlayFightAudio(FightResult result)
    {
        AudioClip soundToPlay = null;
        
        switch (result.resultType)
        {
            case FightResultType.Fighter1Advantage:
            case FightResultType.Fighter2Advantage:
            case FightResultType.MutualDamage:
                soundToPlay = punchSounds[Random.Range(0, punchSounds.Length)];
                break;
                
            case FightResultType.SpecialMove:
                soundToPlay = specialMoveSounds[Random.Range(0, specialMoveSounds.Length)];
                break;
                
            case FightResultType.Stalemate:
                soundToPlay = blockSounds[Random.Range(0, blockSounds.Length)];
                break;
        }
        
        if (soundToPlay)
            fightAudioSource.PlayOneShot(soundToPlay);
        
        // Fight commentary
        PlayFightCommentary(result);
    }
    
    void PlayFightCommentary(FightResult result)
    {
        string[] comments = null;
        
        switch (result.resultType)
        {
            case FightResultType.Fighter1Advantage:
                comments = new string[] {
                    fighter1.characterData.displayName + " da powerful attack!",
                    "Kya punch mara hai!",
                    "Bahut strong move!"
                };
                break;
                
            case FightResultType.Fighter2Advantage:
                comments = new string[] {
                    fighter2.characterData.displayName + " ne counter attack kiya!",
                    "Excellent defense aur counter!",
                    "Wah kya technique hai!"
                };
                break;
                
            case FightResultType.MutualDamage:
                comments = new string[] {
                    "Dono ne maar khaayi!",
                    "Dangerous fight hai ye!",
                    "Koi nahi chhod raha!"
                };
                break;
                
            case FightResultType.SpecialMove:
                comments = new string[] {
                    "Special move! Dekho kya power!",
                    "Punjab style special attack!",
                    "Ye to signature move tha!"
                };
                break;
                
            case FightResultType.Stalemate:
                comments = new string[] {
                    "Dono defensive ho gaye!",
                    "Koi attack nahi kar raha!",
                    "Strategy game chal raha!"
                };
                break;
        }
        
        if (comments != null && comments.Length > 0)
        {
            commentary.PlayRandomComment(comments);
        }
    }
    
    void UpdateFightUI()
    {
        if (player1HealthBar)
            player1HealthBar.value = fighter1Health;
        
        if (player2HealthBar)
            player2HealthBar.value = fighter2Health;
        
        if (fightTimerText)
        {
            int seconds = Mathf.CeilToInt(fightTimer);
            fightTimerText.text = seconds.ToString();
        }
    }
    
    void EndFight()
    {
        PlayerController winner = fighter1Health > fighter2Health ? fighter1 : fighter2;
        PlayerController loser = winner == fighter1 ? fighter2 : fighter1;
        
        photonView.RPC("RPC_EndFight", RpcTarget.All, winner.photonView.ViewID);
    }
    
    [PunRPC]
    void RPC_EndFight(int winnerID)
    {
        PlayerController winner = PhotonView.Find(winnerID).GetComponent&lt;PlayerController&gt;();
        PlayerController loser = winner == fighter1 ? fighter2 : fighter1;
        
        // End fight state
        fightActive = false;
        fighter1.isFighting = false;
        fighter2.isFighting = false;
        
        // Hide UI
        fightUI.SetActive(false);
        
        // Stop effects
        if (dustCloud.isPlaying)
            dustCloud.Stop();
        
        // Play end sound
        fightAudioSource.PlayOneShot(fightEndSound);
        
        // Victory/defeat voices
        winner.PlayVoiceLine(winner.characterData.victoryVoices);
        loser.PlayVoiceLine(loser.characterData.defeatVoices);
        
        // Commentary for fight end
        string[] endComments = {
            winner.characterData.displayName + " jeet gaya!",
            "Kya fight thi! " + winner.characterData.displayName + " winner!",
            "Punjab style victory! Shabash!",
            loser.characterData.displayName + " ne bahut accha fight kiya!"
        };
        commentary.PlayRandomComment(endComments);
        
        // Give rewards to winner
        if (winner.photonView.IsMine)
        {
            CoinSystem coinSystem = FindObjectOfType&lt;CoinSystem&gt;();
            coinSystem.AddCoins(75); // Fight victory bonus
        }
        
        // Crowd reaction
        gameManager.TriggerCrowdReaction(CrowdReaction.Excited);
        
        // Continue kabaddi match
        gameManager.OnFightEnd(winner, loser);
    }
    
    void EndFightByTime()
    {
        // Determine winner by health percentage
        float fighter1HealthPercent = fighter1Health / 100f;
        float fighter2HealthPercent = fighter2Health / 100f;
        
        if (fighter1HealthPercent > fighter2HealthPercent)
        {
            EndFight();
        }
        else if (fighter2HealthPercent > fighter1HealthPercent)
        {
            EndFight();
        }
        else
        {
            // Draw - both players continue
            photonView.RPC("RPC_FightDraw", RpcTarget.All);
        }
    }
    
    [PunRPC]
    void RPC_FightDraw()
    {
        fightActive = false;
        fighter1.isFighting = false;
        fighter2.isFighting = false;
        fightUI.SetActive(false);
        
        string[] drawComments = {
            "Fight draw ho gayi!",
            "Dono equally strong!",
            "Koi winner nahi, dono champion!"
        };
        commentary.PlayRandomComment(drawComments);
    }
    
    // UI Button Methods
    public void OnAttackButton()
    {
        SetFightAction(FightAction.Attack);
    }
    
    public void OnDefendButton()
    {
        SetFightAction(FightAction.Defend);
    }
    
    public void OnSpecialButton()
    {
        // Check if player has enough special energy
        PlayerController localFighter = fighter1.photonView.IsMine ? fighter1 : fighter2;
        
        if (localFighter.specialMoveEnergy >= localFighter.maxSpecialEnergy)
        {
            SetFightAction(FightAction.Special);
            localFighter.specialMoveEnergy = 0f;
        }
    }
    
    void SetFightAction(FightAction action)
    {
        if (fighter1.photonView.IsMine)
        {
            photonView.RPC("RPC_SetFightAction", RpcTarget.All, 1, (int)action);
        }
        else if (fighter2.photonView.IsMine)
        {
            photonView.RPC("RPC_SetFightAction", RpcTarget.All, 2, (int)action);
        }
    }
    
    [PunRPC]
    void RPC_SetFightAction(int fighterNumber, int actionInt)
    {
        FightAction action = (FightAction)actionInt;
        
        if (fighterNumber == 1)
        {
            fighter1Action = action;
        }
        else
        {
            fighter2Action = action;
        }
        
        // Check if both actions submitted
        if (fighter1Action != FightAction.None && fighter2Action != FightAction.None)
        {
            actionsSubmitted = true;
        }
    }
    
    FightAction GetRandomAction()
    {
        FightAction[] actions = { FightAction.Attack, FightAction.Defend, FightAction.Special };
        return actions[Random.Range(0, actions.Length)];
    }
}

public enum FightAction
{
    None, Attack, Defend, Special
}

public enum FightResultType
{
    Fighter1Advantage, Fighter2Advantage, MutualDamage, SpecialMove, Stalemate
}

public class FightResult
{
    public float fighter1Damage;
    public float fighter2Damage;
    public FightResultType resultType;
}</div>
        </div>

        <!-- Commentary System -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-orange-400"><i class="fas fa-microphone-alt mr-3"></i>CommentarySystem.cs - Punjabi Commentary</h2>
            <div class="code-block">using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class CommentarySystem : MonoBehaviour
{
    [Header("Audio Settings")]
    public AudioSource commentarySource;
    public float commentaryVolume = 0.8f;
    public float commentaryDelay = 0.5f;
    
    [Header("Commentary Clips")]
    public AudioClip[] matchStartCommentary;
    public AudioClip[] raidCommentary;
    public AudioClip[] tackleCommentary;
    public AudioClip[] fightCommentary;
    public AudioClip[] scoreCommentary;
    public AudioClip[] winCommentary;
    public AudioClip[] loseCommentary;
    public AudioClip[] specialMoveCommentary;
    
    [Header("Character Specific Commentary")]
    public CharacterCommentary[] characterCommentaries;
    
    [Header("Dynamic Commentary")]
    public bool enableDynamicCommentary = true;
    public float commentaryFrequency = 8f; // seconds between auto commentary
    
    // Commentary Management
    private Queue&lt;CommentaryLine&gt; commentaryQueue;
    private bool isPlaying = false;
    private float lastCommentaryTime;
    private GameManager gameManager;
    
    // Punjabi Commentary Texts with Audio
    private Dictionary&lt;string, AudioClip&gt; punjabiComments;
    
    void Start()
    {
        InitializeCommentarySystem();
        SetupPunjabiComments();
        StartCoroutine(DynamicCommentarySystem());
    }
    
    void InitializeCommentarySystem()
    {
        commentaryQueue = new Queue&lt;CommentaryLine&gt;();
        gameManager = FindObjectOfType&lt;GameManager&gt;();
        commentarySource.volume = commentaryVolume;
        
        lastCommentaryTime = Time.time;
    }
    
    void SetupPunjabiComments()
    {
        punjabiComments = new Dictionary&lt;string, AudioClip&gt;();
        
        // Load all Punjabi commentary from Resources
        AudioClip[] allClips = Resources.LoadAll&lt;AudioClip&gt;("Commentary/Punjabi");
        
        foreach (AudioClip clip in allClips)
        {
            punjabiComments[clip.name] = clip;
        }
        
        // Create dynamic commentary if clips not found
        CreateMissingCommentary();
    }
    
    void CreateMissingCommentary()
    {
        // Essential Punjabi phrases for kabaddi
        string[] essentialPhrases = {
            "Ladai ho gayi!",
            "Raid shuru!",
            "Bahut badhiya!",
            "Kya move tha!",
            "Jeet gaye!",
            "Frandipuriya ne chhakka maar ditta!",
            "Shera aa gaya!",
            "Punjab di shaan!",
            "Ek dam solid tackle!",
            "Crowd pagal ho gaya!"
        };
        
        // These would be generated with TTS or pre-recorded
        foreach (string phrase in essentialPhrases)
        {
            if (!punjabiComments.ContainsKey(phrase))
            {
                // Create placeholder - in real implementation, use TTS
                punjabiComments[phrase] = CreatePunjabiTTS(phrase);
            }
        }
    }
    
    AudioClip CreatePunjabiTTS(string text)
    {
        // Placeholder - would integrate with Punjabi TTS system
        // For now, return a generic clip or generate procedural audio
        return Resources.Load&lt;AudioClip&gt;("Audio/Generic/punjabi_generic");
    }
    
    public void PlayMatchStartCommentary()
    {
        string[] startComments = {
            "KabaddiGang match shuru ho gaya!",
            "Do teams ready hai! Dekhte hai kaun jeetega!",
            "Punjab style kabaddi! Full on entertainment!",
            "Players tayyar, crowd excited! Match begin!"
        };
        
        PlayRandomComment(startComments);
    }
    
    public void PlayRaidCommentary(PlayerController raider)
    {
        string[] raidComments = {
            raider.characterData.displayName + " ne raid lagayi!",
            "Dekho kya karta hai " + raider.characterData.displayName,
            "Raid mode on! " + raider.characterData.characterName + " attacking!",
            "Opponents ready raho, " + raider.characterData.displayName + " aa raha!",
            "Kabaddi kabaddi! " + raider.characterData.characterName + " on fire!"
        };
        
        PlayRandomComment(raidComments);
    }
    
    public void PlayTackleCommentary(PlayerController tackler, PlayerController tackled)
    {
        string[] tackleComments = {
            tackler.characterData.displayName + " ne " + tackled.characterData.displayName + " ko tackle kar diya!",
            "Kya tackle tha! Bahut solid!",
            "Excellent defense by " + tackler.characterData.displayName + "!",
            tackled.characterData.displayName + " caught! Great work " + tackler.characterData.displayName,
            "Punjab style tackle! Perfect technique!"
        };
        
        PlayRandomComment(tackleComments);
    }
    
    public void PlayFightCommentary(PlayerController fighter1, PlayerController fighter2)
    {
        string[] fightComments = {
            "Ladai ho gayi! " + fighter1.characterData.displayName + " vs " + fighter2.characterData.displayName + "!",
            "Do shera aapse vich! Bahut dangerous fight!",
            "Punjabi style fight! Dekho kaun jeetega!",
            "Crowd on their feet! Epic fight happening!",
            fighter1.characterData.displayName + " aur " + fighter2.characterData.displayName + " full power mein!",
            "Referee ready hai! Clean fight karo!"
        };
        
        PlayRandomComment(fightComments);
    }
    
    public void PlayScoreCommentary(Team scoringTeam, int currentScore)
    {
        string teamName = scoringTeam == Team.TeamA ? "Team A" : "Team B";
        
        string[] scoreComments = {
            teamName + " ne point score kiya! Current score: " + currentScore,
            "Shabash " + teamName + "! Excellent play!",
            "Point mil gaya! " + teamName + " leading kar rahi!",
            "Crowd celebrating! " + teamName + " ne score badhaya!",
            "Strategic play by " + teamName + "! Perfect execution!"
        };
        
        PlayRandomComment(scoreComments);
    }
    
    public void PlaySpecialMoveCommentary(PlayerController player)
    {
        string[] specialComments = {
            player.characterData.displayName + " ne special move use kiya!",
            "Dekho! " + player.characterData.characterName + " ka signature move!",
            "Power move! " + player.characterData.displayName + " full form mein!",
            "Ye to special technique thi! Bahut impressive!",
            "Crowd ka favorite move! " + player.characterData.displayName + " rocks!"
        };
        
        // Add character-specific special move commentary
        if (HasCharacterSpecificCommentary(player))
        {
            PlayCharacterSpecificCommentary(player, CommentaryType.SpecialMove);
        }
        else
        {
            PlayRandomComment(specialComments);
        }
    }
    
    public void PlayVictoryCommentary(PlayerController winner)
    {
        string[] victoryComments = {
            winner.characterData.displayName + " jeet gaya! Bahut badhiya performance!",
            "Winner: " + winner.characterData.displayName + "! Crowd going wild!",
            "Excellent match! " + winner.characterData.characterName + " deserved winner!",
            "Punjab da champion! " + winner.characterData.displayName + " victorious!",
            "What a game! " + winner.characterData.displayName + " on top!"
        };
        
        PlayRandomComment(victoryComments);
    }
    
    public void PlayCharacterEntryCommentary(PlayerController player)
    {
        if (HasCharacterSpecificCommentary(player))
        {
            PlayCharacterSpecificCommentary(player, CommentaryType.Entry);
        }
        else
        {
            string[] entryComments = {
                player.characterData.displayName + " entered! Crowd excited!",
                "Here comes " + player.characterData.characterName + "! Ready for action!",
                player.characterData.displayName + " ka entry! Full energy!",
                "Player spotlight: " + player.characterData.displayName + "!"
            };
            
            PlayRandomComment(entryComments);
        }
    }
    
    bool HasCharacterSpecificCommentary(PlayerController player)
    {
        foreach (CharacterCommentary commentary in characterCommentaries)
        {
            if (commentary.characterName == player.characterData.characterName)
            {
                return true;
            }
        }
        return false;
    }
    
    void PlayCharacterSpecificCommentary(PlayerController player, CommentaryType type)
    {
        CharacterCommentary commentary = GetCharacterCommentary(player.characterData.characterName);
        
        if (commentary != null)
        {
            AudioClip[] clips = null;
            
            switch (type)
            {
                case CommentaryType.Entry:
                    clips = commentary.entryComments;
                    break;
                case CommentaryType.Raid:
                    clips = commentary.raidComments;
                    break;
                case CommentaryType.Tackle:
                    clips = commentary.tackleComments;
                    break;
                case CommentaryType.Fight:
                    clips = commentary.fightComments;
                    break;
                case CommentaryType.SpecialMove:
                    clips = commentary.specialMoveComments;
                    break;
                case CommentaryType.Victory:
                    clips = commentary.victoryComments;
                    break;
            }
            
            if (clips != null && clips.Length > 0)
            {
                AudioClip selectedClip = clips[Random.Range(0, clips.Length)];
                PlayCommentaryClip(selectedClip);
            }
        }
    }
    
    CharacterCommentary GetCharacterCommentary(string characterName)
    {
        foreach (CharacterCommentary commentary in characterCommentaries)
        {
            if (commentary.characterName == characterName)
            {
                return commentary;
            }
        }
        return null;
    }
    
    public void PlayRandomComment(string[] comments)
    {
        if (comments.Length > 0)
        {
            string selectedComment = comments[Random.Range(0, comments.Length)];
            PlayComment(selectedComment);
        }
    }
    
    public void PlayComment(string commentText)
    {
        // Check if we have audio clip for this comment
        if (punjabiComments.ContainsKey(commentText))
        {
            PlayCommentaryClip(punjabiComments[commentText]);
        }
        else
        {
            // Generate TTS or use generic clip
            AudioClip generatedClip = CreatePunjabiTTS(commentText);
            if (generatedClip)
            {
                PlayCommentaryClip(generatedClip);
            }
        }
        
        // Also show text on screen
        ShowCommentaryText(commentText);
    }
    
    void PlayCommentaryClip(AudioClip clip)
    {
        if (clip && commentarySource)
        {
            CommentaryLine line = new CommentaryLine();
            line.audioClip = clip;
            line.delay = commentaryDelay;
            
            commentaryQueue.Enqueue(line);
            
            if (!isPlaying)
            {
                StartCoroutine(PlayCommentaryQueue());
            }
        }
    }
    
    IEnumerator PlayCommentaryQueue()
    {
        isPlaying = true;
        
        while (commentaryQueue.Count > 0)
        {
            CommentaryLine line = commentaryQueue.Dequeue();
            
            yield return new WaitForSeconds(line.delay);
            
            if (line.audioClip)
            {
                commentarySource.PlayOneShot(line.audioClip);
                yield return new WaitForSeconds(line.audioClip.length + 0.5f);
            }
        }
        
        isPlaying = false;
        lastCommentaryTime = Time.time;
    }
    
    void ShowCommentaryText(string text)
    {
        // Show commentary text on UI
        CommentaryUI commentaryUI = FindObjectOfType&lt;CommentaryUI&gt;();
        if (commentaryUI)
        {
            commentaryUI.ShowCommentary(text);
        }
    }
    
    IEnumerator DynamicCommentarySystem()
    {
        while (true)
        {
            yield return new WaitForSeconds(commentaryFrequency);
            
            if (enableDynamicCommentary && 
                gameManager.currentState == GameState.Playing && 
                Time.time - lastCommentaryTime > commentaryFrequency)
            {
                PlayDynamicCommentary();
            }
        }
    }
    
    void PlayDynamicCommentary()
    {
        // Analyze current game state and provide relevant commentary
        string[] dynamicComments = {
            "Match intense ho raha hai!",
            "Dono teams equally balanced!",
            "Crowd fully engaged! Great atmosphere!",
            "Strategic gameplay dikh raha hai!",
            "Energy level maximum! Players on fire!",
            "Punjab style kabaddi at its best!",
            "Defensive play strong hai dono sides!"
        };
        
        // Context-based commentary
        if (gameManager.teamAScore == gameManager.teamBScore)
        {
            PlayRandomComment(new string[] {
                "Score barabar hai! Very exciting match!",
                "Tight competition! Koi bhi jeet sakta!",
                "Equal fight! Both teams strong!"
            });
        }
        else if (Mathf.Abs(gameManager.teamAScore - gameManager.teamBScore) > 5)
        {
            string leadingTeam = gameManager.teamAScore > gameManager.teamBScore ? "Team A" : "Team B";
            PlayRandomComment(new string[] {
                leadingTeam + " clearly leading! Dominant performance!",
                "One-sided match! " + leadingTeam + " in control!",
                leadingTeam + " strategy working perfectly!"
            });
        }
        else
        {
            PlayRandomComment(dynamicComments);
        }
    }
    
    // Public methods for external triggers
    public void OnPlayerInjured(PlayerController player)
    {
        string[] injuryComments = {
            player.characterData.displayName + " hurt ho gaya! Medical attention needed!",
            "Ouch! " + player.characterData.displayName + " pain mein!",
            "Hopefully minor injury! " + player.characterData.displayName + " strong player!"
        };
        
        PlayRandomComment(injuryComments);
    }
    
    public void OnTimeRunningOut()
    {
        string[] timeComments = {
            "Time running out! Final minutes!",
            "Clock ticking! Crucial moments!",
            "Last chance for both teams!",
            "Tension building! Time pressure!"
        };
        
        PlayRandomComment(timeComments);
    }
    
    public void OnCrowdReaction(CrowdReaction reaction)
    {
        string[] crowdComments = null;
        
        switch (reaction)
        {
            case CrowdReaction.Excited:
                crowdComments = new string[] {
                    "Crowd going wild!",
                    "Amazing atmosphere!",
                    "Spectators loving it!"
                };
                break;
                
            case CrowdReaction.Fighting:
                crowdComments = new string[] {
                    "Crowd on their feet!",
                    "Electric atmosphere!",
                    "Everyone cheering!"
                };
                break;
                
            case CrowdReaction.Goal:
                crowdComments = new string[] {
                    "Stadium erupting!",
                    "Celebration time!",
                    "Crowd ecstatic!"
                };
                break;
        }
        
        if (crowdComments != null)
        {
            PlayRandomComment(crowdComments);
        }
    }
}

[System.Serializable]
public class CharacterCommentary
{
    public string characterName;
    public AudioClip[] entryComments;
    public AudioClip[] raidComments;
    public AudioClip[] tackleComments;
    public AudioClip[] fightComments;
    public AudioClip[] specialMoveComments;
    public AudioClip[] victoryComments;
}

public class CommentaryLine
{
    public AudioClip audioClip;
    public float delay;
}

public enum CommentaryType
{
    Entry, Raid, Tackle, Fight, SpecialMove, Victory, Defeat
}</div>
        </div>

        <!-- Monetization System -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-green-400"><i class="fas fa-dollar-sign mr-3"></i>Complete Monetization System</h2>
            <div class="code-block">// AdManager.cs - Advertisement Integration
using UnityEngine;
using UnityEngine.Advertisements;
using System;

public class AdManager : MonoBehaviour, IUnityAdsLoadListener, IUnityAdsShowListener
{
    [Header("Ad Settings")]
    [SerializeField] bool testMode = false;
    [SerializeField] string androidGameId = "4000000";
    [SerializeField] string iOSGameId = "4000001";
    
    [Header("Ad Unit IDs")]
    [SerializeField] string rewardedAdUnitId = "Rewarded_Android";
    [SerializeField] string interstitialAdUnitId = "Interstitial_Android";
    [SerializeField] string bannerAdUnitId = "Banner_Android";
    
    private string gameId;
    public static AdManager Instance;
    
    // Events
    public static event Action OnRewardedAdCompleted;
    public static event Action OnInterstitialAdClosed;
    
    void Awake()
    {
        if (Instance == null)
        {
            Instance = this;
            DontDestroyOnLoad(gameObject);
        }
        else
        {
            Destroy(gameObject);
        }
    }
    
    void Start()
    {
        InitializeAds();
    }
    
    void InitializeAds()
    {
        gameId = Application.platform == RuntimePlatform.IPhonePlayer ? iOSGameId : androidGameId;
        
        if (!Advertisement.isInitialized && Advertisement.isSupported)
        {
            Advertisement.Initialize(gameId, testMode);
        }
        
        LoadBannerAd();
        LoadRewardedAd();
        LoadInterstitialAd();
    }
    
    // Rewarded Ads (for coins, characters, etc.)
    public void LoadRewardedAd()
    {
        Advertisement.Load(rewardedAdUnitId, this);
    }
    
    public void ShowRewardedAd()
    {
        if (Advertisement.isInitialized && IsRewardedAdReady())
        {
            Advertisement.Show(rewardedAdUnitId, this);
        }
        else
        {
            LoadRewardedAd();
        }
    }
    
    public bool IsRewardedAdReady()
    {
        return Advertisement.IsReady(rewardedAdUnitId);
    }
    
    // Interstitial Ads (between matches)
    public void LoadInterstitialAd()
    {
        Advertisement.Load(interstitialAdUnitId, this);
    }
    
    public void ShowInterstitialAd()
    {
        if (Advertisement.isInitialized && IsInterstitialAdReady())
        {
            Advertisement.Show(interstitialAdUnitId, this);
        }
    }
    
    public bool IsInterstitialAdReady()
    {
        return Advertisement.IsReady(interstitialAdUnitId);
    }
    
    // Banner Ads (persistent)
    void LoadBannerAd()
    {
        BannerLoadOptions options = new BannerLoadOptions
        {
            loadCallback = OnBannerLoaded,
            errorCallback = OnBannerError
        };
        
        Advertisement.Banner.Load(bannerAdUnitId, options);
    }
    
    public void ShowBannerAd()
    {
        BannerOptions options = new BannerOptions
        {
            showCallback = OnBannerShown,
            hideCallback = OnBannerHidden
        };
        
        Advertisement.Banner.Show(bannerAdUnitId, options);
    }
    
    // Unity Ads Callbacks
    public void OnUnityAdsAdLoaded(string adUnitId)
    {
        Debug.Log("Ad Loaded: " + adUnitId);
    }
    
    public void OnUnityAdsFailedToLoad(string adUnitId, UnityAdsLoadError error, string message)
    {
        Debug.Log($"Error loading Ad Unit {adUnitId}: {error.ToString()} - {message}");
    }
    
    public void OnUnityAdsShowStart(string adUnitId) { }
    
    public void OnUnityAdsShowClick(string adUnitId) { }
    
    public void OnUnityAdsShowComplete(string adUnitId, UnityAdsShowCompletionState showCompletionState)
    {
        if (adUnitId.Equals(rewardedAdUnitId) && showCompletionState.Equals(UnityAdsShowCompletionState.COMPLETED))
        {
            Debug.Log("Rewarded ad completed!");
            OnRewardedAdCompleted?.Invoke();
            
            // Give reward
            GiveAdReward();
        }
        
        LoadRewardedAd();
    }
    
    public void OnUnityAdsShowFailure(string adUnitId, UnityAdsShowError error, string message)
    {
        Debug.Log($"Error showing Ad Unit {adUnitId}: {error.ToString()} - {message}");
    }
    
    void GiveAdReward()
    {
        CoinSystem coinSystem = FindObjectOfType&lt;CoinSystem&gt;();
        if (coinSystem)
        {
            coinSystem.AddCoins(100); // Ad reward: 100 coins
        }
        
        // Chance to get character unlock
        if (UnityEngine.Random.Range(0, 100) < 10) // 10% chance
        {
            CharacterManager characterManager = FindObjectOfType&lt;CharacterManager&gt;();
            if (characterManager)
            {
                // Unlock random locked character
                var lockedCharacters = characterManager.GetLockedCharacters();
                if (lockedCharacters.Count > 0)
                {
                    var randomCharacter = lockedCharacters[UnityEngine.Random.Range(0, lockedCharacters.Count)];
                    characterManager.UnlockCharacterDirectly(randomCharacter.characterName);
                    
                    // Show popup
                    ShowCharacterUnlockPopup(randomCharacter);
                }
            }
        }
    }
    
    // Banner callbacks
    void OnBannerLoaded() { ShowBannerAd(); }
    void OnBannerError(string message) { }
    void OnBannerShown() { }
    void OnBannerHidden() { }
}

// CoinSystem.cs - In-game Currency
using UnityEngine;
using UnityEngine.UI;
using System;

public class CoinSystem : MonoBehaviour
{
    [Header("Coin Settings")]
    public int startingCoins = 500;
    public Text coinDisplay;
    public GameObject coinEarnEffect;
    
    private int currentCoins;
    private const string COINS_KEY = "PlayerCoins";
    
    public static event Action&lt;int&gt; OnCoinsChanged;
    
    void Start()
    {
        LoadCoins();
        UpdateCoinDisplay();
    }
    
    void LoadCoins()
    {
        currentCoins = PlayerPrefs.GetInt(COINS_KEY, startingCoins);
    }
    
    void SaveCoins()
    {
        PlayerPrefs.SetInt(COINS_KEY, currentCoins);
        PlayerPrefs.Save();
    }
    
    public void AddCoins(int amount)
    {
        currentCoins += amount;
        SaveCoins();
        UpdateCoinDisplay();
        OnCoinsChanged?.Invoke(currentCoins);
        
        // Show earn effect
        if (coinEarnEffect)
        {
            GameObject effect = Instantiate(coinEarnEffect, transform.position, Quaternion.identity);
            Text effectText = effect.GetComponentInChildren&lt;Text&gt;();
            if (effectText)
            {
                effectText.text = "+" + amount;
            }
        }
    }
    
    public bool SpendCoins(int amount)
    {
        if (currentCoins >= amount)
        {
            currentCoins -= amount;
            SaveCoins();
            UpdateCoinDisplay();
            OnCoinsChanged?.Invoke(currentCoins);
            return true;
        }
        return false;
    }
    
    public int GetCoins()
    {
        return currentCoins;
    }
    
    void UpdateCoinDisplay()
    {
        if (coinDisplay)
        {
            coinDisplay.text = currentCoins.ToString();
        }
    }
    
    // Coin earning methods
    public void OnMatchWin()
    {
        AddCoins(150);
    }
    
    public void OnMatchLoss()
    {
        AddCoins(50);
    }
    
    public void OnSuccessfulRaid()
    {
        AddCoins(25);
    }
    
    public void OnSuccessfulTackle()
    {
        AddCoins(30);
    }
    
    public void OnFightWin()
    {
        AddCoins(75);
    }
    
    public void OnDailyBonus()
    {
        AddCoins(200);
    }
}

// ReferralSystem.cs - Friend Referral System
using UnityEngine;
using UnityEngine.UI;
using System.Collections.Generic;
using System;

public class ReferralSystem : MonoBehaviour
{
    [Header("Referral Settings")]
    public int coinsPerReferral = 100;
    public int characterUnlockReferrals = 5;
    
    [Header("UI Elements")]
    public Text referralCountText;
    public Text nextRewardText;
    public Button shareButton;
    public GameObject referralRewardPopup;
    
    [Header("Referral Rewards")]
    public ReferralReward[] referralRewards;
    
    private int currentReferrals;
    private List&lt;string&gt; referredPlayers;
    private const string REFERRALS_KEY = "PlayerReferrals";
    private const string REFERRED_PLAYERS_KEY = "ReferredPlayers";
    
    public static event Action&lt;int&gt; OnReferralCountChanged;
    
    void Start()
    {
        LoadReferralData();
        UpdateReferralUI();
        
        shareButton.onClick.AddListener(ShareReferralCode);
    }
    
    void LoadReferralData()
    {
        currentReferrals = PlayerPrefs.GetInt(REFERRALS_KEY, 0);
        
        // Load referred players list
        string referredData = PlayerPrefs.GetString(REFERRED_PLAYERS_KEY, "");
        referredPlayers = new List&lt;string&gt;();
        
        if (!string.IsNullOrEmpty(referredData))
        {
            string[] playerIds = referredData.Split(',');
            referredPlayers.AddRange(playerIds);
        }
    }
    
    void SaveReferralData()
    {
        PlayerPrefs.SetInt(REFERRALS_KEY, currentReferrals);
        
        string referredData = string.Join(",", referredPlayers.ToArray());
        PlayerPrefs.SetString(REFERRED_PLAYERS_KEY, referredData);
        
        PlayerPrefs.Save();
    }
    
    public void OnNewReferral(string playerId)
    {
        if (!referredPlayers.Contains(playerId))
        {
            referredPlayers.Add(playerId);
            currentReferrals++;
            
            SaveReferralData();
            UpdateReferralUI();
            
            // Give referral rewards
            GiveReferralReward();
            
            OnReferralCountChanged?.Invoke(currentReferrals);
        }
    }
    
    void GiveReferralReward()
    {
        // Give coins
        CoinSystem coinSystem = FindObjectOfType&lt;CoinSystem&gt;();
        if (coinSystem)
        {
            coinSystem.AddCoins(coinsPerReferral);
        }
        
        // Check for special rewards
        foreach (ReferralReward reward in referralRewards)
        {
            if (currentReferrals == reward.requiredReferrals && !reward.claimed)
            {
                ClaimReferralReward(reward);
                break;
            }
        }
        
        // Character unlock every 5 referrals
        if (currentReferrals % characterUnlockReferrals == 0)
        {
            UnlockRandomCharacter();
        }
    }
    
    void ClaimReferralReward(ReferralReward reward)
    {
        reward.claimed = true;
        
        switch (reward.rewardType)
        {
            case RewardType.Coins:
                FindObjectOfType&lt;CoinSystem&gt;().AddCoins(reward.coinAmount);
                break;
                
            case RewardType.Character:
                CharacterManager characterManager = FindObjectOfType&lt;CharacterManager&gt;();
                if (characterManager)
                {
                    characterManager.UnlockCharacterDirectly(reward.characterName);
                }
                break;
                
            case RewardType.PremiumPass:
                // Unlock premium pass
                PremiumPassManager.Instance.UnlockPremiumPass();
                break;
        }
        
        // Show reward popup
        ShowReferralRewardPopup(reward);
    }
    
    void UnlockRandomCharacter()
    {
        CharacterManager characterManager = FindObjectOfType&lt;CharacterManager&gt;();
        if (characterManager)
        {
            var lockedCharacters = characterManager.GetLockedCharacters();
            var freeToUnlock = lockedCharacters.FindAll(c => !c.isPremiumOnly);
            
            if (freeToUnlock.Count > 0)
            {
                var randomCharacter = freeToUnlock[UnityEngine.Random.Range(0, freeToUnlock.Count)];
                characterManager.UnlockCharacterDirectly(randomCharacter.characterName);
                
                ShowCharacterUnlockPopup(randomCharacter);
            }
        }
    }
    
    void ShareReferralCode()
    {
        string referralCode = GenerateReferralCode();
        string shareText = $"Join me in KabaddiGang! Use my referral code: {referralCode}\n" +
                          $"Download: https://play.google.com/store/apps/details?id=com.kabaddigang\n" +
                          $"ਕਬੱਡੀ ਗੈਂਗ - ਪੰਜਾਬੀ ਸਟਾਈਲ ਗੇਮ!";
        
#if UNITY_ANDROID
        AndroidJavaClass intentClass = new AndroidJavaClass("android.content.Intent");
        AndroidJavaObject intentObject = new AndroidJavaObject("android.content.Intent");
        
        intentObject.Call&lt;AndroidJavaObject&gt;("setAction", intentClass.GetStatic&lt;string&gt;("ACTION_SEND"));
        intentObject.Call&lt;AndroidJavaObject&gt;("setType", "text/plain");
        intentObject.Call&lt;AndroidJavaObject&gt;("putExtra", intentClass.GetStatic&lt;string&gt;("EXTRA_TEXT"), shareText);
        
        AndroidJavaClass unity = new AndroidJavaClass("com.unity3d.player.UnityPlayer");
        AndroidJavaObject currentActivity = unity.GetStatic&lt;AndroidJavaObject&gt;("currentActivity");
        
        AndroidJavaObject chooser = intentClass.CallStatic&lt;AndroidJavaObject&gt;("createChooser", intentObject, "Share KabaddiGang");
        currentActivity.Call("startActivity", chooser);
#elif UNITY_IOS
        // iOS sharing implementation
        Application.OpenURL("https://apps.apple.com/app/kabaddigang/");
#endif
    }
    
    string GenerateReferralCode()
    {
        // Generate unique referral code based on player ID
        string playerId = SystemInfo.deviceUniqueIdentifier;
        return "KG" + playerId.Substring(0, 6).ToUpper();
    }
    
    public int GetReferralCount()
    {
        return currentReferrals;
    }
    
    void UpdateReferralUI()
    {
        if (referralCountText)
            referralCountText.text = currentReferrals.ToString();
        
        if (nextRewardText)
        {
            int nextMilestone = ((currentReferrals / characterUnlockReferrals) + 1) * characterUnlockReferrals;
            int remaining = nextMilestone - currentReferrals;
            nextRewardText.text = $"Next character unlock in {remaining} referrals";
        }
    }
}

[System.Serializable]
public class ReferralReward
{
    public int requiredReferrals;
    public RewardType rewardType;
    public int coinAmount;
    public string characterName;
    public bool claimed = false;
}

public enum RewardType
{
    Coins, Character, PremiumPass
}</div>
        </div>

        <!-- Multiplayer System -->
        <div class="bg-gray-800 p-6 rounded-lg mb-8">
            <h2 class="text-3xl font-bold mb-6 text-cyan-400"><i class="fas fa-wifi mr-3"></i>Multiplayer & Voice Chat System</h2>
            <div class="code-block">// NetworkManager.cs - Photon PUN2 Multiplayer
using Photon.Pun;
using Photon.Realtime;
using UnityEngine;
using UnityEngine.UI;
using System.Collections;
using Hashtable = ExitGames.Client.Photon.Hashtable;

public class NetworkManager : MonoBehaviourPunPV, IConnectionCallbacks, IMatchmakingCallbacks
{
    [Header("Connection Settings")]
    public string gameVersion = "1.0";
    public int maxPlayersPerRoom = 14;
    
    [Header("UI References")]
    public GameObject connectingPanel;
    public GameObject mainMenuPanel;
    public GameObject roomListPanel;
    public GameObject createRoomPanel;
    public Text connectionStatusText;
    public Button playWithFriendsButton;
    public Button playRandomButton;
    public InputField roomNameInput;
    public InputField playerNameInput;
    
    [Header("Room Management")]
    public Transform roomListParent;
    public GameObject roomListItemPrefab;
    
    private bool isConnecting = false;
    private TypedLobby customLobby = new TypedLobby("KabaddiGangLobby", LobbyType.Default);
    
    void Start()
    {
        PhotonNetwork.AutomaticallySyncScene = true;
        
        // Set player name from saved data or default
        string savedName = PlayerPrefs.GetString("PlayerName", "Player" + Random.Range(1000, 9999));
        if (playerNameInput) playerNameInput.text = savedName;
        
        ConnectToPhoton();
    }
    
    public void ConnectToPhoton()
    {
        isConnecting = true;
        connectingPanel.SetActive(true);
        connectionStatusText.text = "Connecting to KabaddiGang servers...";
        
        PhotonNetwork.GameVersion = gameVersion;
        PhotonNetwork.ConnectUsingSettings();
    }
    
    public override void OnConnectedToMaster()
    {
        Debug.Log("Connected to Photon Master Server");
        connectionStatusText.text = "Connected! Joining lobby...";
        
        PhotonNetwork.JoinLobby(customLobby);
    }
    
    public override void OnJoinedLobby()
    {
        Debug.Log("Joined Lobby");
        isConnecting = false;
        
        connectingPanel.SetActive(false);
        mainMenuPanel.SetActive(true);
        
        connectionStatusText.text = "Ready to play!";
    }
    
    public void PlayWithFriends()
    {
        mainMenuPanel.SetActive(false);
        createRoomPanel.SetActive(true);
    }
    
    public void PlayRandomMatch()
    {
        connectionStatusText.text = "Finding random match...";
        
        // Try to join random room
        PhotonNetwork.JoinRandomRoom();
    }
    
    public void CreateRoom()
    {
        if (string.IsNullOrEmpty(roomNameInput.text))
        {
            roomNameInput.text = "Room" + Random.Range(1000, 9999);
        }
        
        string roomName = roomNameInput.text;
        string playerName = string.IsNullOrEmpty(playerNameInput.text) ? "Player" : playerNameInput.text;
        
        PhotonNetwork.NickName = playerName;
        PlayerPrefs.SetString("PlayerName", playerName);
        
        RoomOptions roomOptions = new RoomOptions();
        roomOptions.MaxPlayers = (byte)maxPlayersPerRoom;
        roomOptions.IsOpen = true;
        roomOptions.IsVisible = true;
        
        // Room custom properties
        Hashtable roomProperties = new Hashtable();
        roomProperties["gameMode"] = "Kabaddi";
        roomProperties["map"] = "Punjab Stadium";
        roomOptions.CustomRoomProperties = roomProperties;
        roomOptions.CustomRoomPropertiesForLobby = new string[] { "gameMode", "map" };
        
        PhotonNetwork.CreateRoom(roomName, roomOptions);
        connectionStatusText.text = "Creating room...";
    }
    
    public override void OnJoinedRoom()
    {
        Debug.Log("Joined room: " + PhotonNetwork.CurrentRoom.Name);
        connectionStatusText.text = "Joined room! Waiting for players...";
        
        // Load game scene
        if (PhotonNetwork.IsMasterClient)
        {
            StartCoroutine(WaitForPlayersAndStartGame());
        }
    }
    
    IEnumerator WaitForPlayersAndStartGame()
    {
        // Wait for at least 2 players
        while (PhotonNetwork.CurrentRoom.PlayerCount < 2)
        {
            yield return new WaitForSeconds(1f);
        }
        
        // Wait a bit more for more players to join
        yield return new WaitForSeconds(5f);
        
        // Start the game
        photonView.RPC("StartKabaddiMatch", RpcTarget.All);
    }
    
    [PunRPC]
    void StartKabaddiMatch()
    {
        PhotonNetwork.LoadLevel("KabaddiGameScene");
    }
    
    public override void OnJoinRandomFailed(short returnCode, string message)
    {
        Debug.Log("Join random failed: " + message);
        connectionStatusText.text = "No rooms found, creating new room...";
        
        // Create a new room if can't join random
        CreateRandomRoom();
    }
    
    void CreateRandomRoom()
    {
        string randomRoomName = "Room" + Random.Range(10000, 99999);
        PhotonNetwork.NickName = "Player" + Random.Range(1000, 9999);
        
        RoomOptions roomOptions = new RoomOptions();
        roomOptions.MaxPlayers = (byte)maxPlayersPerRoom;
        roomOptions.IsOpen = true;
        roomOptions.IsVisible = true;
        
        PhotonNetwork.CreateRoom(randomRoomName, roomOptions);
    }
    
    public override void OnCreateRoomFailed(short returnCode, string message)
    {
        Debug.Log("Create room failed: " + message);
        connectionStatusText.text = "Failed to create room: " + message;
    }
    
    public override void OnDisconnected(DisconnectCause cause)
    {
        Debug.Log("Disconnected: " + cause.ToString());
        connectionStatusText.text = "Disconnected: " + cause.ToString();
        
        isConnecting = false;
        connectingPanel.SetActive(true);
        mainMenuPanel.SetActive(false);
    }
    
    public override void OnPlayerEnteredRoom(Player newPlayer)
    {
        Debug.Log("Player joined: " + newPlayer.NickName);
        
        // Welcome message
        photonView.RPC("ShowWelcomeMessage", RpcTarget.All, newPlayer.NickName);
    }
    
    [PunRPC]
    void ShowWelcomeMessage(string playerName)
    {
        // Show in-game notification
        NotificationManager.Instance?.ShowNotification(playerName + " joined the match!");
    }
    
    public override void OnPlayerLeftRoom(Player otherPlayer)
    {
        Debug.Log("Player left: " + otherPlayer.NickName);
        
        photonView.RPC("ShowPlayerLeftMessage", RpcTarget.All, otherPlayer.NickName);
    }
    
    [PunRPC]
    void ShowPlayerLeftMessage(string playerName)
    {
        NotificationManager.Instance?.ShowNotification(playerName + " left the match!");
    }
}

// VoiceChat.cs - In-Match Voice Communication
using UnityEngine;
using Photon.Voice.Unity;
using Photon.Voice.PUN;

public class VoiceChat : MonoBehaviourPunPV
{
    [Header("Voice Settings")]
    public bool voiceEnabled = true;
    public float voiceVolume = 1f;
    
    [Header("UI Controls")]
    public Button muteButton;
    public Button pushToTalkButton;
    public Slider voiceVolumeSlider;
    public GameObject voiceChatPanel;
    
    [Header("Visual Indicators")]
    public GameObject speakingIndicator;
    public Image[] playerVoiceIndicators; // For each player
    
    private Recorder voiceRecorder;
    private AudioSource voiceAudioSource;
    private bool isMuted = false;
    private bool isPushToTalk = false;
    
    void Start()
    {
        SetupVoiceChat();
        SetupUI();
    }
    
    void SetupVoiceChat()
    {
        // Get Photon Voice components
        voiceRecorder = GetComponent&lt;Recorder&gt;();
        voiceAudioSource = GetComponent&lt;AudioSource&gt;();
        
        if (!voiceRecorder)
        {
            voiceRecorder = gameObject.AddComponent&lt;Recorder&gt;();
        }
        
        // Configure recorder
        voiceRecorder.TransmitEnabled = voiceEnabled && !isMuted;
        voiceRecorder.VoiceDetection = true;
        voiceRecorder.VoiceDetectionThreshold = 0.01f;
        voiceRecorder.VoiceDetectionDelayMs = 500;
        
        // Set audio settings
        if (voiceAudioSource)
        {
            voiceAudioSource.volume = voiceVolume;
        }
    }
    
    void SetupUI()
    {
        if (muteButton)
        {
            muteButton.onClick.AddListener(ToggleMute);
            UpdateMuteButtonText();
        }
        
        if (pushToTalkButton)
        {
            // Add push-to-talk functionality
            UnityEngine.EventSystems.EventTrigger trigger = pushToTalkButton.gameObject.AddComponent&lt;UnityEngine.EventSystems.EventTrigger&gt;();
            
            var pointerDown = new UnityEngine.EventSystems.EventTrigger.Entry();
            pointerDown.eventID
